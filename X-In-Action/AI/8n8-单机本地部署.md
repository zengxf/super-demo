# 8n8-单机本地部署
- ref: https://hub.docker.com/r/n8nio/n8n


## 部署
### 1. 创建 docker-compose.yaml
1. 先创建 `8n8` 文件夹
2. 创建 `yaml` 文件
```yaml
services:
  n8n:
    image: n8nio/n8n
    container_name: n8n
    restart: always
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      #- N8N_BASIC_AUTH_USER=admin # 此设置没用
      #- n8N_BASIC_AUTH_PASSWORD=admin
      - GENERIC_TIMEZONE=Asia/Shanghai
      - TZ=Asia/Shanghai
      - N8N_SECURE_COOKIE=false # 本地测试建议关闭安全 Cookie，避免非 HTTPS 登录失败
    volumes:
      - ./n8n_data:/home/node/.n8n
```

### 2.启动
```bash
# 导航到 8n8 目录
cd 8n8

# 启动容器
docker compose up -d

# 验证 & 重启
docker compose ps
docker compose down
docker compose up -d
```


## 访问 Dify
- http://localhost:5678/
- 第 1 次，设置好账号密码即可


## 问题
1. Docker 引擎没运行
```bash
docker-compose up -d
# err:
#   unable to get image 'n8nio/n8n': error during connect: Get "http://%2F%2F.%2Fpipe%2FdockerDesktopLinuxEngine/v1.51/images/n8nio/n8n/json": 
#   open //./pipe/dockerDesktopLinuxEngine: The system cannot find the file specified.

docker pull n8nio/n8n
# err:
#   Using default tag: latest
#   failed to connect to the docker API at npipe:////./pipe/dockerDesktopLinuxEngine; check if the path is correct and if the daemon is running: 
#   open //./pipe/dockerDesktopLinuxEngine: The system cannot find the file specified.
```